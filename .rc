# .rc
#
# Shell agnostic non-login configuration.

### General

set -o vi
PROMPT_COMMAND="history -a;"

### Sources

# RVM
if [ -f $HOME/.rvm/scripts/rvm ]; then
  . $HOME/.rvm/scripts/rvm
fi

### Aliases

# commands
alias less='less -R'
alias grep='grep --color=always'
alias rm='rm -i'
alias steam='STEAM_RUNTIME=1 steam'
alias firefox='firefox -new-window'
alias chromium='chromium --incognito'

# shortcuts
alias ipext='curl -s icanhazip.com'
alias dateo='date +%Y%m%d%H%M%S'
alias django='python manage.py'
alias srv='python -m SimpleHTTPServer'
alias gd='git diff --full-index master HEAD'
alias gh='history -n 2> /dev/null'
alias nl='netstat -ltn'
alias pa='sudo puppet agent'
alias pt='pa -t'
alias pen='pa --enable'
alias pdn='pa --disable'

### Functions

# runs puppet with an optional environment
function pr() {
  local environment="production"
  [ -n "$1" ] && environment="$1"

  pt --environment="${environment}"
}

# freezes puppet into an optional environment
function pe() {
  local environment="production"
  [ -n "$1" ] && environment=$1 && shift

  local passargs=
  (( $# > 0 )) && passargs="$@"

  pen && \
  pt --environment=${environment} ${passargs} && \
  pdn
}
